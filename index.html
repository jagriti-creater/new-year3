<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Only For You â¤ï¸</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins}
body{background:#000;color:#fff;text-align:center}

section{min-height:100vh;display:none;flex-direction:column;align-items:center;justify-content:center;padding:20px}
.show{display:flex}

button{padding:12px 26px;border:none;border-radius:30px;background:#ff3f81;color:#fff;font-size:15px;margin:6px}
input{padding:12px;border-radius:25px;border:none;width:75%;font-size:15px}

/* GAME */
.grid{display:grid;grid-template-columns:repeat(3,90px);gap:12px}
.card{width:90px;height:90px;background:#ffb6d5;border-radius:16px;font-size:36px;display:flex;align-items:center;justify-content:center}

/* CHAT */
.chat{width:100%;max-width:420px;background:#111;border-radius:22px;padding:15px}
.messages{height:260px;overflow-y:auto;text-align:left}
.msg{padding:10px 14px;margin:8px 0;border-radius:18px;max-width:80%;position:relative;word-wrap:break-word}
.me{background:#ff3f81;margin-left:auto}
.her{background:#333}
.msg img{max-width:160px;border-radius:12px}
.msg audio{max-width:160px}
.status{font-size:11px;opacity:.7;text-align:right}
.seen{color:#4fc3ff}

/* typing / recording dots */
.typing{display:flex;gap:4px;height:16px;margin:6px}
.typing span{width:6px;height:6px;background:#aaa;border-radius:50%;animation:blink 1.4s infinite both}
.typing span:nth-child(2){animation-delay:.2s}
.typing span:nth-child(3){animation-delay:.4s}
@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}
</style>
</head>

<body>

<!-- ğŸ” PASSWORD -->
<section id="lock" class="show">
  <h2>ğŸ” Private Website</h2>
   <p>Password daliye ğŸ’Œ <p>
  <input id="passInput" placeholder="Password">
  <button onclick="checkPass()">Unlock</button>
  <p id="error" style="color:#ff7777"></p>
</section>

<!-- ğŸ‘‹ HELLO -->
<section id="s1">
  <h1>Oyeeee betuuï¸ğŸ’–â˜ºï¸</h1>
  <p>This website is only for you</p>
  <button onclick="next(2)">Next âœ</button>
</section>

<!-- ğŸ® GAME -->
<section id="s2">
  <h2>Find My Heart ğŸ’“</h2>
  <p>ğŸ’“ ko 9 baar dhundo</p>
  <div class="grid" id="grid"></div>
  <p id="gScore">0 / 9 </p>
</section>

<!-- WISH -->
<section id="s3">
  <h1>Just for you </h1>
   <p>
   <p>
  <p>
Tumhari smile meri sabse badi strength hai
Tumhari khushi k liye m kuch v kr sakta hu
Tu ho to m hu, tum nhi to mere hone ka koi vajud nhi 
Tum paas ho to sab perfect hai âœ¨<br><br>
<br>
  </h6> Mai manta hu ki mai RU jitna perfect nahi hu na hi  uske jaisa baate karna aata hai na hi uske jaisa wishes karna aata hai par jitna prem wo karti hai usse zyada  mai tumse karta hu ğŸ’«   </h6>
</p>
  <button onclick="next(4)">Next</button>
</section>

<!-- CHOCOLATE -->
<section id="s4">
  <h1>ğŸ«â¤ï¸</h1>
  <h2>Can our frienship is forever?</h2>
  <button onclick="next(5)">Absolutelyâ˜ºï¸</button>
</section>

<!-- CHAT -->
<section id="chatSec">
  <h2>Chat ğŸ’¬</h2>

  <div id="typingDots" class="typing"></div>
  <div id="recordingDots" class="typing"></div>

  <div class="chat">
    <div class="messages" id="messages"></div>

    <input id="msg" placeholder="Type messageâ€¦">
    <button onclick="sendText()">Send</button>

    <input type="file" id="imgInput" accept="image/*" style="display:none">
    <button onclick="imgInput.click()">ğŸ“¸</button>
    <button onclick="recordVoice()">ğŸ™ï¸</button>
  </div>
</section>

<!-- INSTAGRAM STYLE UNSEND MODAL -->
<div id="unsendModal" style="
display:none;position:fixed;bottom:0;width:100%;
background:#111;padding:20px;border-radius:20px 20px 0 0;z-index:9999">
  <button id="unsendAll">ğŸ—‘ï¸ Unsend for everyone</button>
  <button id="deleteMe">Delete for me</button>
  <button onclick="closeUnsend()">Cancel</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
/* CONFIG */
const SITE_PASSWORD="Bittu";
const ROOM_ID="8305350551_PRIVATE";
const GAME_TARGET=9;

/* FIREBASE */
firebase.initializeApp({
  apiKey:"AIzaSyCpHVoEn0J5Z4iY7ET5rsrxHKowHOWi0js",
  authDomain:"bittu-f87b3.firebaseapp.com",
  databaseURL:"https://bittu-f87b3-default-rtdb.firebaseio.com",
  projectId:"bittu-f87b3"
});
const db=firebase.database();

/* PASSWORD */
function checkPass(){
  if(passInput.value===SITE_PASSWORD){
    lock.classList.remove("show");
    s1.classList.add("show");
  }
}
function next(n){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("show"));
  document.getElementById(n===5?"chatSec":"s"+n).classList.add("show");
}

/* GAME */
let score=0;
function vibrate(ms=80){if(navigator.vibrate) navigator.vibrate(ms);}
function startGame(){
  grid.innerHTML="";
  const win=Math.floor(Math.random()*9);
  for(let i=0;i<9;i++){
    const c=document.createElement("div");
    c.className="card"; c.innerText="â“";
    c.onclick=()=>{
      vibrate();
      if(i===win){
        c.innerText="ğŸ’“"; score++;
        gScore.innerText=score+" / "+GAME_TARGET;
        if(score>=GAME_TARGET) setTimeout(()=>next(3),500);
        else setTimeout(startGame,300);
      }else c.innerText=" ğŸ˜¹";
    };
    grid.appendChild(c);
  }
}
startGame();

/* USER */
const devId=localStorage.devId||("dev_"+Date.now());
localStorage.devId=devId;

/* CHAT CORE */
const messages=document.getElementById("messages");
let CURRENT_KEY=null, pressTimer=null;

/* SEND TEXT */
function sendText(){
  if(!msg.value) return;
  db.ref("privateChat/"+ROOM_ID).push({
    type:"text", text:msg.value, by:devId, time:Date.now(), status:"sent"
  });
  msg.value="";
}

/* IMAGE */
imgInput.onchange=()=>{
  const r=new FileReader();
  r.onload=()=>db.ref("privateChat/"+ROOM_ID).push({
    type:"image", text:r.result, by:devId, time:Date.now(), status:"sent"
  });
  r.readAsDataURL(imgInput.files[0]);
};

/* VOICE */
function recordVoice(){
  navigator.mediaDevices.getUserMedia({audio:true}).then(s=>{
    const rec=new MediaRecorder(s), chunks=[];
    db.ref("recording/"+ROOM_ID+"/"+devId).set(true);
    rec.start(); vibrate([50,50,50]);
    rec.ondataavailable=e=>chunks.push(e.data);
    setTimeout(()=>{
      rec.stop();
      rec.onstop=()=>{
        db.ref("recording/"+ROOM_ID+"/"+devId).set(false);
        const r=new FileReader();
        r.onload=()=>db.ref("privateChat/"+ROOM_ID).push({
          type:"voice", text:r.result, by:devId, time:Date.now(), status:"sent"
        });
        r.readAsDataURL(new Blob(chunks,{type:"audio/webm"}));
      };
    },4000);
  });
}

/* RECEIVE + LONG PRESS */
db.ref("privateChat/"+ROOM_ID).on("child_added",snap=>{
  const m=snap.val(), key=snap.key;
  const mine=m.by===devId;

  const d=document.createElement("div");
  d.className="msg "+(mine?"me":"her");
  d.id="msg_"+key;

  if(m.type==="text") d.innerText=m.text;
  if(m.type==="image"){const i=document.createElement("img"); i.src=m.text; d.appendChild(i);}
  if(m.type==="voice"){const a=document.createElement("audio"); a.controls=true; a.src=m.text; d.appendChild(a);}

  const st=document.createElement("div");
  st.className="status";
  if(mine){
    st.innerHTML = (m.status==="seen") ? "<span class='seen'>âœ“âœ“</span>" : "âœ“âœ“";
  }
  d.appendChild(st);

  d.addEventListener("touchstart",()=>{
    pressTimer=setTimeout(()=>openUnsend(key,mine,m.time),600);
  });
  d.addEventListener("touchend",()=>clearTimeout(pressTimer));

  messages.appendChild(d);
  messages.scrollTop=messages.scrollHeight;

  if(!mine){
    db.ref("privateChat/"+ROOM_ID+"/"+key+"/status").set("seen");
  }
});

/* ğŸ”¥ DELETE FOR EVERYONE â€“ REALTIME FIX */
db.ref("privateChat/"+ROOM_ID).on("child_removed", snap=>{
  const el=document.getElementById("msg_"+snap.key);
  if(el) el.remove();
});

/* TYPING */
msg.addEventListener("input",()=>{
  const tRef=db.ref("typing/"+ROOM_ID+"/"+devId);
  tRef.set(true);
  setTimeout(()=>tRef.set(false),1200);
});
db.ref("typing/"+ROOM_ID).on("value",snap=>{
  const t=snap.val()||{};
  typingDots.innerHTML =
    Object.keys(t).some(id=>id!==devId && t[id])
    ? "<span></span><span></span><span></span>"
    : "";
});

/* RECORDING DOTS */
db.ref("recording/"+ROOM_ID).on("value",snap=>{
  const r=snap.val()||{};
  recordingDots.innerHTML =
    Object.keys(r).some(id=>id!==devId && r[id])
    ? "<span></span><span></span><span></span>"
    : "";
});

/* UNSEND MODAL LOGIC */
function openUnsend(key,isMine,time){
  CURRENT_KEY=key;
  unsendModal.style.display="block";
  unsendAll.style.display=isMine?"block":"none";
}
function closeUnsend(){
  unsendModal.style.display="none";
  CURRENT_KEY=null;
}
unsendAll.onclick=()=>{
  if(CURRENT_KEY){
    db.ref("privateChat/"+ROOM_ID+"/"+CURRENT_KEY).remove();
    closeUnsend();
  }
};
deleteMe.onclick=()=>{
  document.getElementById("msg_"+CURRENT_KEY)?.remove();
  closeUnsend();
};
</script>

</body>
</html>